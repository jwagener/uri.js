var URI,__hasProp=Object.prototype.hasOwnProperty;
URI=function(i,j){var h,g,e;i==null&&(i="");j==null&&(j={});h=/^(?:([^@]*)@)?([^:]*)(?::(\d*))?/;this.scheme=this.user=this.password=this.host=this.port=this.path=this.query=this.fragment=null;e=i.match(/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/);this.scheme=e[1];g=e[2];if(g!=null){h=g.match(h);g=h[1];if(g!=null)this.user=g.split(":")[0],this.password=g.split(":")[1];this.host=h[2];this.port=parseInt(h[3],10)||null}this.path=e[3];this.query=e[4];this.fragment=e[5];
this.toString=function(){var a;a="";this.isAbsolute()&&(a+=this.scheme,a+="://",this.user!=null&&(a+=this.user+":"+this.password+"@"),a+=this.host,this.port!=null&&(a+=":"+this.port));a+=this.path;this.query!=null&&(a+="?"+this.query);this.fragment!=null&&(a+="#"+this.fragment);return a};this.isRelative=function(){return!this.isAbsolute()};this.isAbsolute=function(){return this.host!=null};this.decodeParams=function(a){var b,d,c,f,e;a==null&&(a="");d={};e=a.split("&");a=0;for(f=e.length;a<f;a++)b=
e[a],c=b.split("="),b=decodeURIComponent(c[0]),c=decodeURIComponent(c[1]||""),this.normalizeParams(d,b,c);return d};this.normalizeParams=function(a,b,d){var c,f;d==null&&(d=NULL);e=b.match(/^[\[\]]*([^\[\]]+)\]*(.*)/);b=e[1]||"";c=e[2]||"";c===""?a[b]=d:c==="[]"?(a[b]||(a[b]=[]),a[b].push(d)):(f=c.match(/^\[\]\[([^\[\]]+)\]$/)||(f=c.match(/^\[\](.+)$/)))?(c=f[1],a[b]||(a[b]=[]),f=a[b][a[b].length-1],f!=null&&f.constructor===Object&&f[c]==null?this.normalizeParams(f,c,d):a[b].push(this.normalizeParams({},
c,d))):(a[b]||(a[b]={}),a[b]=this.normalizeParams(a[b],c,d));return a};this.encodeParams=function(a,b){var d,c,f,e;b==null&&(b="");c="";if(a===null)b!=null&&(c+=b);else if(a.constructor===Object)for(d in a)__hasProp.call(a,d)&&(e=a[d],f=b!==""?b+"["+d+"]":d,c+=this.encodeParams(e,f));else if(a.constructor===Array){d=0;for(f=a.length;d<f;d++)e=a[d],c+=this.encodeParams(e,b+"[]")}else c=b!==""?b+"="+encodeURIComponent(a)+"&":a;return c};return this};
